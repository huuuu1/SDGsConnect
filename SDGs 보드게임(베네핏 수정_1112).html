<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SDGs ì»¤ë„¥ì…˜ í€´ì¦ˆ ë¶€ë£¨ë§ˆë¸”</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', 'Inter', sans-serif;
            touch-action: manipulation;
            background-color: #ffffff;
            color: #334155;
        }
        #game-board {
            display: grid;
            grid-template-columns: repeat(11, 1fr);
            grid-template-rows: repeat(8, 1fr);
            gap: 5px;
            width: 100%;
            max-width: 1400px;
            aspect-ratio: 11 / 8;
            margin: auto;
            padding: 12px;
            background-color: #ffffff;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
        }

        .square {
            position: relative;
            border: 1px solid rgba(0,0,0,0.02);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            font-size: 2rem;
            color: #334155;
            padding: 4px;
            word-break: keep-all;
            min-height: 60px;
            transition: all 0.2s ease;
        }
        
        .s0 { grid-column: 1 / 2; grid-row: 1 / 2; } .s1 { grid-column: 2 / 3; grid-row: 1 / 2; }
        .s2 { grid-column: 3 / 4; grid-row: 1 / 2; } .s3 { grid-column: 4 / 5; grid-row: 1 / 2; }
        .s4 { grid-column: 5 / 6; grid-row: 1 / 2; } .s5 { grid-column: 6 / 7; grid-row: 1 / 2; }
        .s6 { grid-column: 7 / 8; grid-row: 1 / 2; } .s7 { grid-column: 8 / 9; grid-row: 1 / 2; }
        .s8 { grid-column: 9 / 10; grid-row: 1 / 2; } .s9 { grid-column: 10 / 11; grid-row: 1 / 2; }
        .s10 { grid-column: 11 / 12; grid-row: 1 / 2; } .s11 { grid-column: 11 / 12; grid-row: 2 / 3; }
        .s12 { grid-column: 11 / 12; grid-row: 3 / 4; } .s13 { grid-column: 11 / 12; grid-row: 4 / 5; }
        .s14 { grid-column: 11 / 12; grid-row: 5 / 6; } .s15 { grid-column: 11 / 12; grid-row: 6 / 7; }
        .s16 { grid-column: 11 / 12; grid-row: 7 / 8; } .s17 { grid-column: 11 / 12; grid-row: 8 / 9; }
        .s18 { grid-column: 10 / 11; grid-row: 8 / 9; } .s19 { grid-column: 9 / 10; grid-row: 8 / 9; }
        .s20 { grid-column: 8 / 9; grid-row: 8 / 9; } .s21 { grid-column: 7 / 8; grid-row: 8 / 9; }
        .s22 { grid-column: 6 / 7; grid-row: 8 / 9; } .s23 { grid-column: 5 / 6; grid-row: 8 / 9; }
        .s24 { grid-column: 4 / 5; grid-row: 8 / 9; } .s25 { grid-column: 3 / 4; grid-row: 8 / 9; }
        .s26 { grid-column: 2 / 3; grid-row: 8 / 9; } .s27 { grid-column: 1 / 2; grid-row: 8 / 9; }
        .s28 { grid-column: 1 / 2; grid-row: 7 / 8; } .s29 { grid-column: 1 / 2; grid-row: 6 / 7; }
        .s30 { grid-column: 1 / 2; grid-row: 5 / 6; } .s31 { grid-column: 1 / 2; grid-row: 4 / 5; }
        .s32 { grid-column: 1 / 2; grid-row: 3 / 4; } .s33 { grid-column: 1 / 2; grid-row: 2 / 3; }

        .center-area {
            grid-column: 2 / 11;
            grid-row: 2 / 8;
            background-color: #f0fdf4;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 16px;
            gap: 1rem;
        }

        .player-token {
            position: absolute;
            width: 28px;
            height: 28px;
            z-index: 10;
            transition: all 0.2s ease-in-out;
            bottom: 6px;
            left: 6px;
        }
        
        @media (max-width: 768px) {
            .square { font-size: 0.65rem; min-height: 50px; }
            .player-token { width: 20px; height: 20px; }
        }
    </style>
</head>
<body class="bg-white text-gray-800 py-10">

    <header class="w-full mb-6">
        <nav class="max-w-7xl mx-auto flex justify-between items-center px-4 py-3 border-b-4 border-[#52b017]">
            <a href="SDGs ë©”ì¸.html" class="text-3xl font-bold text-[#595959]">Connect</a>
            <div class="flex items-center space-x-6 text-lg font-medium">
                <a href="SDGsë€.html" class="text-gray-500 hover:text-black">SDGsë€?</a>
                <a href="SDGs ë³´ë“œê²Œì„(ë² ë„¤í• ìˆ˜ì •_1112).html" class="text-[#52b017] hover:text-black font-bold">SDGs ë³´ë“œê²Œì„</a>
                <a href="SDGs ì•„ì¹´ì´ë¹™.html" class="text-gray-500 hover:text-black">SDGs ì•„ì¹´ì´ë¹™</a>
                <a href="ì–´ë°”ì›ƒ ì–´ìŠ¤.html" class="text-gray-500 hover:text-black">About US</a>
            </div>
        </nav>
    </header>

    <div id="game-container" class="w-full max-w-7xl mx-auto">
        
        <div id="game-board">
            
            <div class="center-area">
                <div id="dice-container" class="text-center">
                    <div id="dice-result" class="text-8xl font-bold mb-4 text-gray-700">ğŸ²</div>
                    <button id="roll-dice-btn" class="bg-[#52b017] hover:bg-[#52b017] text-white font-bold py-3 px-8 rounded-full text-2xl shadow-lg transform transition-all duration-150 ease-in-out hover:scale-105 active:scale-95">
                        ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸°
                    </button>
                </div>
                <p id="game-message" class="text-xl font-semibold text-[#52b017] h-8">ì£¼ì‚¬ìœ„ë¥¼ êµ´ë ¤ì£¼ì„¸ìš”!</p>
            </div>
            
        </div>
    </div>

    <div id="quiz-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 p-4">
        <div class="bg-green-50 rounded-2xl shadow-xl p-8 w-full max-w-2xl">
            <div class="flex items-start space-x-3">
                <span class="text-3xl font-bold text-gray-500">Q.</span>
                <p id="quiz-question" class="text-xl text-gray-800 mb-6">í€´ì¦ˆ ì˜ˆì‹œì…ë‹ˆë‹¤.</p>
            </div>
            <div id="quiz-options" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                </div>
            <a id="quiz-hint-link" href="#" target="_blank" class="block text-right text-sm text-gray-500 mt-4 hover:underline cursor-pointer">
                íŒíŠ¸ ë³´ëŸ¬ê°€ê¸°
            </a>
        </div>
    </div>
    
    <dialog id="result-modal" class="bg-green-50 text-gray-800 rounded-2xl shadow-xl p-8 w-full max-w-md text-center backdrop:bg-black backdrop:bg-opacity-50">
        <h3 id="result-title" class="text-2xl font-bold mb-4"></h3>
        <p id="result-message" class="text-lg mb-6 whitespace-pre-line"></p>
        <button id="result-ok-btn" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-6 rounded-lg transition-colors">í™•ì¸</button>
    </dialog>


<script>
    const boardData = [
        { id: 0, name: "START", type: "start", country: "Global", sdg: 0 },
        { id: 1, name: "1", type: "quiz", country: "í•œêµ­", sdg: 4, question: "SDG 4ì˜ í•µì‹¬ ëª©í‘œë¡œ ê°€ì¥ ì ì ˆí•œ ê²ƒì€?", options: ["í•´ì–‘ ìì› ë³´í˜¸", "ëª¨ë‘ë¥¼ ìœ„í•œ ì–‘ì§ˆì˜ êµìœ¡ ë³´ì¥", "ë„ì‹œ ì˜¨ì‹¤ê°€ìŠ¤ ì œë¡œí™”", "ë¹ˆê³¤ì¸µ ì¼ìë¦¬ ì°½ì¶œ"], correctIndex: 1, benefitMoves: 0, penaltyMoves: 1 },
        { id: 2, name: "2", type: "quiz", country: "ì¼ë³¸", sdg: 11, question: "ì§€ì†ê°€ëŠ¥í•œ ë„ì‹œëŠ” ë‹¤ìŒ ì¤‘ ì–´ëŠ ìš”ì†Œë¥¼ í¬í•¨í•˜ëŠ”ê°€?", options: ["ì¬ë‚œì— ê°•í•œ ë„ì‹œ êµ¬ì¡°", "ë¬´ì¡°ê±´ì ì¸ ê³ ì¸µ ê±´ë¬¼ ê°œë°œ"], correctIndex: 0, benefitMoves: 0, penaltyMoves: 2 },
        { id: 3, name: "3", type: "quiz", country: "í•œêµ­", sdg: 7, question: "SDG 7ì—ì„œ ë‹¤ë£¨ëŠ” ì£¼ìš” ë‚´ìš©ì€?", options: ["ì§€ì†ê°€ëŠ¥í•œ ì—ë„ˆì§€ ì ‘ê·¼", "ì‹ëŸ‰ ê³µê¸‰ë§ ê´€ë¦¬", "í•´ì–‘ ì“°ë ˆê¸° ê°ì†Œ"], correctIndex: 0, benefitMoves: 0, penaltyMoves: 2 },
        { id: 4, name: "4", type: "quiz", country: "ì¼ë³¸", sdg: 2, question: "SDG 2ëŠ” ë‹¤ìŒ ì¤‘ ì–´ëŠ ë‚´ìš©ì„ í¬í•¨í•˜ëŠ”ê°€?", options: ["ì§€ì†ê°€ëŠ¥í•œ ë†ì—…", "ë„ì‹œ ì“°ë ˆê¸° ì²˜ë¦¬ ê¸°ìˆ  ê°œë°œ"], correctIndex: 0, benefitMoves: 0, penaltyMoves: 2 },
        { id: 5, name: "5", type: "quiz", country: "í•œêµ­", sdg: 3, question: "SDG 3ì€ ì‹ ì²´ ê±´ê°•ë¿ ì•„ë‹ˆë¼ ì •ì‹ ê±´ê°•ê¹Œì§€ í¬í•¨í•œë‹¤.", options: ["O", "X"], correctIndex: 0, benefitMoves: 0, penaltyMoves: 2 },
        { id: 6, name: "6", type: "quiz", country: "ì¼ë³¸", sdg: 1, question: "ë‹¤ìŒ ì¤‘ SDG 1ì´ ë‹¤ë£¨ëŠ” â€˜ë¹ˆê³¤â€™ì˜ ì •ì˜ì™€ ê°€ì¥ ê°€ê¹Œìš´ ê²ƒì€?", options: ["ë‹¨ìˆœíˆ ëˆì´ ì—†ëŠ” ìƒíƒœ", "êµìœ¡Â·ì£¼ê±°Â·ê±´ê°• ë“± ê¸°ì´ˆì  ì‚¶ì˜ ì¡°ê±´ì´ ë¶€ì¡±í•œ ìƒíƒœ", "ë‹¨ìˆœ ì£¼ê±°ë¹„ ë¶€ë‹´ ì¦ê°€"], correctIndex: 1, benefitMoves: 0, penaltyMoves: 2 },
        { id: 7, name: "7", type: "quiz", country: "í•œêµ­", sdg: 6, question: "SDG 6ì˜ ì£¼ìš” ëª©í‘œëŠ” ê¹¨ë—í•œ ë¬¼ê³¼ ìœ„ìƒ ë³´ì¥ì´ë‹¤.", options: ["O", "X"], correctIndex: 0, benefitMoves: 0, penaltyMoves: 2 },
        { id: 8, name: "8", type: "quiz", country: "ì¼ë³¸", sdg: 5, question: "SDG 5ì˜ ëª©í‘œëŠ”?", options: ["ì—¬ì„±ì˜ ê¶Œìµ ì‹ ì¥ê³¼ ì„±í‰ë“±", "ìŠ¤ë§ˆíŠ¸ ë†ì—… ê¸°ìˆ  ê°œì„ ", "ì²­ë…„ ê³ ìš©ë¥  í–¥ìƒ", "ìˆ˜ìì› í™•ë³´"], correctIndex: 0, benefitMoves: 0, penaltyMoves: 2 },
        { id: 9, name: "9", type: "quiz", country: "í•œêµ­", sdg: 12, question: "ì¼ë³¸ ì•¼ë§ˆì•¼ë§ˆ ê¸°ì—…ì˜ â€˜ê·œê²© ì™¸ ê³¼ì¼ ì—…ì‚¬ì´í´ ì œí’ˆâ€™ì€ ì‹í’ˆ íê¸° ê°ì†Œì— ê¸°ì—¬í•œë‹¤.", options: ["O", "X"], correctIndex: 0, benefitMoves: 0, penaltyMoves: 2 },
        { id: 10, name: "10", type: "quiz", country: "ì¼ë³¸", sdg: 10, question: "ë¶ˆí‰ë“±ì€ ê°œì¸ ëŠ¥ë ¥ì˜ ë¬¸ì œê°€ ì•„ë‹ˆë¼ êµ¬ì¡°ì  ë¬¸ì œë¡œ ë³¼ ìˆ˜ ìˆë‹¤.", options: ["O", "X"], correctIndex: 0, benefitMoves: 0, penaltyMoves: 2 },
        { id: 11, name: "11", type: "quiz", country: "í•œêµ­", sdg: 8, question: "SDG 8ì—ì„œ ê°•ì¡°í•˜ëŠ” ê²ƒì€?", options: ["ê³ íš¨ìœ¨ ê±´ë¬¼ ì„¤ê³„", "í¬ìš©ì  ê²½ì œì„±ì¥ê³¼ ì–‘ì§ˆì˜ ì¼ìë¦¬", "ê¹¨ë—í•œ í•´ì–‘ ë³´í˜¸"], correctIndex: 1, benefitMoves: 0, penaltyMoves: 2 },
        { id: 12, name: "12", type: "quiz", country: "ì¼ë³¸", sdg: 14, question: "SDG 14ëŠ” í•´ì–‘ ìì›ì„ ì§€ì†ê°€ëŠ¥í•˜ê²Œ ì´ìš©í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•œë‹¤.", options: ["O", "X"], correctIndex: 0, benefitMoves: 0, penaltyMoves: 2 },
        { id: 13, name: "13", type: "quiz", country: "í•œêµ­", sdg: 11, question: "ì¼ë³¸ ë„ì•¼ë§ˆì‹œëŠ” â€˜ì½¤íŒ©íŠ¸ ì‹œí‹°â€™ ì •ì±…ì„ í†µí•´ ëŒ€ì¤‘êµí†µ ì¤‘ì‹¬ ë„ì‹œ ëª¨ë¸ì„ ì¶”ì§„í•˜ê³  ìˆë‹¤.", options: ["O", "X"], correctIndex: 0, benefitMoves: 0, penaltyMoves: 2 },
        { id: 14, name: "14", type: "quiz", country: "ì¼ë³¸", sdg: 13, question: "ê¸°í›„ë³€í™” ëŒ€ì‘(SDG 13)ì´ í¬í•¨í•˜ëŠ” ë‚´ìš©ì€?", options: ["ì˜¨ì‹¤ê°€ìŠ¤ ê°ì¶•", "ì‚°ì—… ë””ìì¸ ê°œì„ ", "êµ­ê²½ ê°„ ë¬´ì—­ ì¥ë²½ ê°ì†Œ"], correctIndex: 0, benefitMoves: 0, penaltyMoves: 2 },
        { id: 15, name: "15", type: "quiz", country: "í•œêµ­", sdg: 16, question: "SDG 16ì€ í‰í™”Â·ì •ì˜Â·ê°•í•œ ì œë„ë¥¼ ëª©í‘œë¡œ í•œë‹¤.", options: ["O", "X"], correctIndex: 0, benefitMoves: 0, penaltyMoves: 2 },
        { id: 16, name: "16", type: "quiz", country: "ì¼ë³¸", sdg: 9, question: "SDG 9ê°€ í¬í•¨í•˜ëŠ” ìš”ì†ŒëŠ” ë¬´ì—‡ì¸ê°€?", options: ["ì‚°ì—… í˜ì‹ ", "í•´ì–‘ ì‚°ì„±í™” ëŒ€ì‘", "ì„±í‰ë“±", "ì‹í’ˆ ì†ì‹¤ ê´€ë¦¬"], correctIndex: 0, benefitMoves: 0, penaltyMoves: 2 },
        { id: 17, name: "17", type: "quiz", country: "í•œêµ­", sdg: 17, question: "SDG 17ì€ ë‹¤ë¥¸ ëª©í‘œë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•œ íŒŒíŠ¸ë„ˆì‹­ êµ¬ì¶•ì´ í•µì‹¬ì´ë‹¤.", options: ["O", "X"], correctIndex: 0, benefitMoves: 0, penaltyMoves: 2 },
        { id: 18, name: "18", type: "quiz", country: "ì¼ë³¸", sdg: 1, question: "ì¼ë³¸ì˜ ì œë¡œì—ë„ˆì§€í•˜ìš°ìŠ¤(ZEH)ëŠ” SDG 7ì˜ ì‹¤ì²œ ì‚¬ë¡€ì´ë‹¤.", options: ["O", "X"], correctIndex: 0, benefitMoves: 0, penaltyMoves: 2 },
        { id: 19, name: "19", type: "quiz", country: "í•œêµ­", sdg: 3, question: "SDG 3ì—ì„œ ê°•ì¡°í•˜ëŠ” ì£¼ìš” ë‚´ìš©ì€?", options: ["ëŒ€ì¤‘êµí†µ ê¸°ë°˜ êµ¬ì¶•", "ëª¨ë“  ì—°ë ¹ëŒ€ì˜ ê±´ê°•í•œ ì‚¶", "ê³ ì„±ëŠ¥ ì‚°ì—… ì¥ë¹„ ê°œë°œ"], correctIndex: 1, benefitMoves: 0, penaltyMoves: 2 },
        { id: 20, name: "20", type: "quiz", country: "ì¼ë³¸", sdg: 5, question: "ì„œìš¸ ì¤‘êµ¬ì˜ â€˜ì•ˆì‹¬ì´ ì•±â€™ì€ ì„±í‰ë“±Â·ì•ˆì „ í™˜ê²½ êµ¬ì¶•ê³¼ ê´€ë ¨ì´ ìˆë‹¤.", options: ["O", "X"], correctIndex: 0, benefitMoves: 0, penaltyMoves: 2 },
        { id: 21, name: "21", type: "quiz", country: "í•œêµ­", sdg: 15, question: "ì¼ë³¸ ì˜¤ì“°ì¹˜ ì§€ë¹„ì— í”„ë¡œì íŠ¸ê°€ ë‹¤ë£¨ëŠ” í•µì‹¬ ë¶„ì•¼ëŠ”?", options: ["ì´ˆê³ ì¸µ ê±´ë¬¼ ê°œë°œ", "ì‚¬ìŠ´ ê°œì²´ ê´€ë¦¬ì™€ ì§€ì—­ ìˆœí™˜ê²½ì œ", "í•´ì–‘ í”Œë¼ìŠ¤í‹± ì œê±° ê¸°ìˆ ", "ë„ì‹œ êµí†µë§ ê´€ë¦¬"], correctIndex: 1, benefitMoves: 0, penaltyMoves: 2 },
        { id: 22, name: "22", type: "quiz", country: "ì¼ë³¸", sdg: 12, question: "ì˜¤ì“°ì¹˜ ì§€ë¹„ì— í”„ë¡œì íŠ¸ëŠ” ì‚¬ìŠ´ ê°œì²´ ìˆ˜ë§Œ ì¡°ì ˆí•˜ëŠ” ë‹¨ì¼ ëª©ì ì˜ ì •ì±…ì´ë‹¤.", options: ["O", "X"], correctIndex: 1, benefitMoves: 0, penaltyMoves: 2 },
        { id: 23, name: "23", type: "quiz", country: "í•œêµ­", sdg: 12, question: "ì§€ì†ê°€ëŠ¥í•œ ì†Œë¹„ì™€ ìƒì‚°ì€ ê¸°ì—…ê³¼ ì‹œë¯¼ ëª¨ë‘ì˜ ì°¸ì—¬ê°€ í•„ìš”í•˜ë‹¤.", options: ["O", "X"], correctIndex: 0, benefitMoves: 0, penaltyMoves: 2 },
        { id: 24, name: "24", type: "quiz", country: "ì¼ë³¸", sdg: 7, question: "SDG 6ì˜ ì£¼ìš” ì˜ì—­ì´ ì•„ë‹Œ ê²ƒì€?", options: ["ìˆ˜ì§ˆ ê°œì„ ", "ì•ˆì „í•œ ì‹ìˆ˜ ê³µê¸‰", "ëŒ€ì¤‘êµí†µ ì „ê¸°í™”"], correctIndex: 2, benefitMoves: 0, penaltyMoves: 2 },
        { id: 25, name: "25", type: "quiz", country: "í•œêµ­", sdg: 8, question: "SDG 9ëŠ” ì‚°ì—… ì„±ì¥ë§Œì„ ëª©í‘œë¡œ í•˜ë©° í™˜ê²½ì€ ê³ ë ¤í•˜ì§€ ì•ŠëŠ”ë‹¤.", options: ["O", "X"], correctIndex: 1, benefitMoves: 0, penaltyMoves: 2 },
        { id: 26, name: "26", type: "quiz", country: "ì¼ë³¸", sdg: 1, question: "í•œì–‘ëŒ€í•™êµì˜ â€˜ë¯¸ìˆ ì˜ì¬ í—¤ë“œìŠ¤íƒ€íŠ¸â€™ ì‚¬ë¡€ëŠ” ì–´ë–¤ ëª©í‘œì™€ ê°€ì¥ ê´€ë ¨ ìˆëŠ”ê°€?", options: ["SDG 1 ë¹ˆê³¤í‡´ì¹˜", "SDG 8 ì¼ìë¦¬", "SDG 12 ì±…ì„ê° ìˆëŠ” ì†Œë¹„", "SDG 15 ìœ¡ìƒìƒíƒœê³„"], correctIndex: 0, benefitMoves: 0, penaltyMoves: 2 },
        { id: 27, name: "27", type: "quiz", country: "í•œêµ­", sdg: 11, question: "ë„ì‹œì˜ ìì›ìˆœí™˜ ì¥í„°(ì„¸Rê°€ê²Œ)ëŠ” SDG 11 ì‹¤ì²œì˜ í•œ ì‚¬ë¡€ì´ë‹¤.", options: ["O", "X"], correctIndex: 0, benefitMoves: 0, penaltyMoves: 2 },
        { id: 28, name: "28", type: "quiz", country: "ì¼ë³¸", sdg: 10, question: "SDG 10ì—ì„œ ë‹¤ë£¨ëŠ” ë¶ˆí‰ë“± ë¬¸ì œëŠ” ë¬´ì—‡ì„ í¬í•¨í•˜ëŠ”ê°€?", options: ["ë‹¨ìˆœ ì†Œë¹„ìŠµê´€", "ì‚¬íšŒÂ·ê²½ì œÂ·ì •ì¹˜ì  í¬ìš©", "í•´ì–‘ ì˜¤ì—¼", "íƒœì–‘ê´‘ ê¸°ìˆ  ê°œë°œ"], correctIndex: 1, benefitMoves: 0, penaltyMoves: 2 },
        { id: 29, name: "29", type: "quiz", country: "í•œêµ­", sdg: 17, question: "SDG 17ì´ ê°•ì¡°í•˜ëŠ” í˜‘ë ¥ ë°©ì‹ì€?", options: ["ê°œì¸ ê°„ ê²½ìŸ ê°•í™”", "êµ­ì œÂ·ì§€ì—­Â·ë¯¼ê°„ íŒŒíŠ¸ë„ˆì‹­", "íê¸°ë¬¼ ê°ì¶• ì •ì±…"], correctIndex: 1, benefitMoves: 0, penaltyMoves: 2 },
        { id: 30, name: "30", type: "quiz", country: "ì¼ë³¸", sdg: 13, question: "ì¹˜ë°”í˜„ ì´ìŠ¤ë¯¸ì‹œì˜ í•™êµê¸‰ì‹ ì‚¬ë¡€ëŠ” ì–´ë–¤ ë‚´ìš©ê³¼ ê°€ì¥ ê´€ë ¨ ìˆëŠ”ê°€?", options: ["ìœ ê¸°ë†ì—… + ì§€ì—­ ì‹ìƒí™œ ê°œì„ ", "í•´ì–‘ ê´€ê´‘ì‚°ì—… í™•ëŒ€", "ì‹ ì¬ìƒ ì—ë„ˆì§€ ë³´ê¸‰"], correctIndex: 0, benefitMoves: 0, penaltyMoves: 2 },
        { id: 31, name: "31", type: "quiz", country: "í•œêµ­", sdg: 14, question: "ê¸°í›„ë³€í™” ëŒ€ì‘ì€ êµìœ¡Â·ë„ì‹œÂ·ì‚°ì—… ë“± ì—¬ëŸ¬ ì˜ì—­ê³¼ ì—°ê²°ëœë‹¤.", options: ["O", "X"], correctIndex: 0, benefitMoves: 0, penaltyMoves: 2 },
        { id: 32, name: "32", type: "quiz", country: "ì¼ë³¸", sdg: 15, question: "ë‹¤ìŒ ì¤‘ SDG 14ì˜ ëª©í‘œê°€ ì•„ë‹Œ ê²ƒì€?", options: ["í•´ì–‘ì˜¤ì—¼ ê°ì†Œ", "ì‚°ë¦¼ ë³µì›", "í•´ì–‘ ìƒíƒœê³„ ë³´í˜¸", "ì§€ì†ê°€ëŠ¥í•œ ì–´ì—…"], correctIndex: 1, benefitMoves: 0, penaltyMoves: 2 },
        { id: 33, name: "33", type: "quiz", country: "í•œêµ­", sdg: 16, question: "ì–‘ì§ˆì˜ ì¼ìë¦¬ëŠ” ë…¸ë™ê¶Œ ë³´í˜¸ë¥¼ í¬í•¨í•œë‹¤.", options: ["O", "X"], correctIndex: 0, benefitMoves: 0, penaltyMoves: 2 },
    ];
    const TOTAL_SQUARES = boardData.length;

    const pastelColors = [
        '#fad2e1', '#e2f0cb', '#c0e7f3', '#fff5c0', '#d8d1f3', '#ffdcc1',
    ];
    
    let player = { id: 1, name: 'í”Œë ˆì´ì–´', position: 0, hasMovedOffStart: false };
    let gameActive = true;
    
    const board = document.getElementById('game-board');
    const rollDiceBtn = document.getElementById('roll-dice-btn');
    const diceResultEl = document.getElementById('dice-result');
    const gameMessageEl = document.getElementById('game-message');
    
    const quizModal = document.getElementById('quiz-modal');
    const quizQuestionEl = document.getElementById('quiz-question');
    const quizOptionsEl = document.getElementById('quiz-options');
    const quizHintLinkEl = document.getElementById('quiz-hint-link'); 
    
    const resultModal = document.getElementById('result-modal');
    const resultTitleEl = document.getElementById('result-title');
    const resultMessageEl = document.getElementById('result-message');
    
    function generateCoupon() {
        const coupons = [
            { text: "10% í• ì¸ ì¿ í°", details: "15,000ì› ì´ìƒ êµ¬ë§¤ ì‹œ" },
            { text: "20% í• ì¸ ì¿ í°", details: "25,000ì› ì´ìƒ êµ¬ë§¤ ì‹œ" },
            { text: "30% í• ì¸ ì¿ í°", details: "35,000ì› ì´ìƒ êµ¬ë§¤ ì‹œ" }
        ];
        const randomCoupon = coupons[Math.floor(Math.random() * coupons.length)];
        
        const p = () => {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let result = '';
            for (let i = 0; i < 4; i++) {
                result += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return result;
        };
        const couponCode = `${p()}-${p()}-${p()}-${p()}`;
        
        return { ...randomCoupon, code: couponCode };
    }


    function createSimplifiedBoard() {
        boardData.forEach((square, index) => {
            const squareEl = document.createElement('div');
            squareEl.id = `square-${index}`;
            squareEl.className = `square s${index}`;
            
            const nameEl = document.createElement('span');
            nameEl.className = 'font-semibold text-gray-700 px-1';
            nameEl.textContent = square.name;

            if (square.type === 'start') {
                squareEl.style.backgroundColor = '#f0fdf4';
                nameEl.textContent = "ğŸ START";
                nameEl.style.color = '#15803d';
                nameEl.style.fontWeight = '700';
            } else {
                squareEl.style.backgroundColor = pastelColors[(index - 1) % pastelColors.length];
            }
            
            squareEl.appendChild(nameEl);
            board.appendChild(squareEl);
        });

        const playerToken = document.createElement('div');
        playerToken.id = 'player-token';
        playerToken.className = 'player-token';
        playerToken.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-full h-full text-green-500" style="filter: drop-shadow(0 1px 1px rgba(0,0,0,0.3));">
                <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
            </svg>
        `;
        document.getElementById('square-0').appendChild(playerToken);
    }

    function animateMove(startPosition, steps) {
        return new Promise(async (resolve) => {
            const token = document.getElementById('player-token');
            if (!token) return resolve({ finalPosition: startPosition, passedStart: false });

            let currentPos = startPosition;
            const direction = steps > 0 ? 1 : -1;
            const totalSteps = Math.abs(steps);
            const delay = 200;
            let passedStart = false;

            for (let i = 0; i < totalSteps; i++) {
                currentPos = (currentPos + direction + TOTAL_SQUARES) % TOTAL_SQUARES;
                
                if (direction === 1 && currentPos === 0) {
                    passedStart = true;
                }
                
                const newSquare = document.getElementById(`square-${currentPos}`);
                if (newSquare) {
                    newSquare.appendChild(token);
                    token.style.bottom = '6px';
                    token.style.left = '6px';
                }
                await new Promise(res => setTimeout(res, delay));
            }
            resolve({ finalPosition: currentPos, passedStart: passedStart });
        });
    }

    function showQuiz(quiz) {
        return new Promise((resolve) => {
            quizQuestionEl.textContent = quiz.question;
            
            quizOptionsEl.innerHTML = '';
            
            quizHintLinkEl.href = `SDGs${quiz.sdg}.html`; 
            quizHintLinkEl.target = "_blank"; 
            
            quiz.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'bg-white shadow-md hover:shadow-lg text-gray-800 font-semibold py-5 px-6 rounded-2xl transition-all duration-150 text-lg';
                button.textContent = option;
                
                button.addEventListener('click', () => {
                    quizModal.classList.add('hidden');
                    const isCorrect = index === quiz.correctIndex;
                    resolve({
                        isCorrect: isCorrect,
                        benefitMoves: quiz.benefitMoves, 
                        penaltyMoves: quiz.penaltyMoves
                    });
                }, { once: true });
                
                quizOptionsEl.appendChild(button);
            });
            
            quizModal.classList.remove('hidden');
        });
    }

    function showResult(title, message) {
          return new Promise((resolve) => {
            let resultOkBtn = document.getElementById('result-ok-btn');
            if (!resultOkBtn || !resultOkBtn.parentNode) {
                console.error("Result OK button or its parent not found!");
                resolve(); 
                return;
            }
            
            const newOkBtn = resultOkBtn.cloneNode(true);
            resultOkBtn.parentNode.replaceChild(newOkBtn, resultOkBtn);
            
            if (title === "SDGs íƒí—˜ì„ ì™„ë£Œí•˜ì˜€ìŠµë‹ˆë‹¤!") {
                resultTitleEl.innerHTML = `<div class="text-6xl mb-4">ğŸ†</div>${title}`;
                resultMessageEl.textContent = message;
                newOkBtn.innerHTML = `
                    <svg class="w-5 h-5 inline-block mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" style="vertical-align: -4px;"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9H4v5m16 0v-5h-.582m-15.356-2A8.001 8.001 0 0019.418 15H20v-5"></path></svg>
                    Replay
                `;
                newOkBtn.addEventListener('click', () => {
                    window.location.reload();
                }, { once: true });

            } else {
                resultTitleEl.textContent = title;
                resultMessageEl.textContent = message;
                newOkBtn.textContent = "í™•ì¸";
                newOkBtn.addEventListener('click', () => {
                    resultModal.close();
                }, { once: true });
            }
            
            resultModal.showModal();
            
            resultModal.addEventListener('close', () => {
                resolve();
            }, { once: true });
        });
    }

    async function rollDiceAndMove() {
        if (!gameActive) return;
        
        const initialPosition = player.position;
        
        gameActive = false;
        rollDiceBtn.disabled = true;
        rollDiceBtn.classList.add('opacity-50', 'cursor-not-allowed');

        let roll = 1;
        const diceAnimation = setInterval(() => {
            roll = Math.floor(Math.random() * 6) + 1;
            diceResultEl.textContent = ['âš€', 'âš', 'âš‚', 'âšƒ', 'âš„', 'âš…'][roll - 1];
        }, 100);

        await new Promise(res => setTimeout(() => {
            clearInterval(diceAnimation);
            roll = Math.floor(Math.random() * 6) + 1;
            diceResultEl.textContent = ['âš€', 'âš', 'âš‚', 'âšƒ', 'âš„', 'âš…'][roll - 1];
            res();
        }, 1000));
        
        if (initialPosition === 0 && !player.hasMovedOffStart && roll > 0) {
            player.hasMovedOffStart = true;
        }
        
        gameMessageEl.textContent = `${roll}ì¹¸ ì´ë™í•©ë‹ˆë‹¤!`;
        await new Promise(res => setTimeout(res, 1000));

        const moveResult1 = await animateMove(initialPosition, roll);
        player.position = moveResult1.finalPosition;
        let passedStart = moveResult1.passedStart;
        
        const square = boardData[player.position];
        
        let moveChange = 0;

        if (square.type === 'quiz') {
            gameMessageEl.textContent = `í€´ì¦ˆ ì‹œê°„!`;
            const result = await showQuiz(square);
            
            if (result.isCorrect) {
                moveChange = result.benefitMoves || 0;
                await showResult("ì •ë‹µì…ë‹ˆë‹¤!", "ë©‹ì ¸ìš”! ğŸ¥³");
            } else {
                moveChange = -Math.abs(result.penaltyMoves || 2); 
                await showResult("ì˜¤ë‹µì…ë‹ˆë‹¤!", `íŒ¨ë„í‹°: ${Math.abs(moveChange)}ì¹¸ ë’¤ë¡œ ì´ë™í•©ë‹ˆë‹¤.`);
            }

            if (moveChange !== 0) {
                gameMessageEl.textContent = `ê²°ê³¼ ì ìš© ì¤‘...`;
                const positionBeforeMove = player.position;
                const moveResult2 = await animateMove(player.position, moveChange);
                player.position = moveResult2.finalPosition;

                if (moveChange < 0 && positionBeforeMove < 10 && player.position > 20) {
                    passedStart = false; 
                    console.log("Penalty crossed start backwards. Game end cancelled.");
                }
                else if (moveResult2.passedStart) { 
                    passedStart = true; 
                }
            }
            
        } 
        
        let isGameEnd = false;
        if (player.hasMovedOffStart && passedStart) {
            isGameEnd = true;
        }

        if (isGameEnd) {
            const coupon = generateCoupon();
            const endMessage = `ì¶•í•˜í•©ë‹ˆë‹¤! ëœë¤ ì¿ í°ì´ ë°œê¸‰ë˜ì—ˆìŠµë‹ˆë‹¤.\n\n${coupon.text}\n(${coupon.details})\n\nì½”ë“œ: ${coupon.code}\n\n* ë³¸ ì¿ í° ì½”ë“œëŠ” 1 IDë‹¹ 1íšŒ ì‚¬ìš© ê°€ëŠ¥í•˜ë©°,\n1ì¼ 1íšŒ ë°œê¸‰ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n\në‹¹ì‹ ì„ SDGs ì „ë¬¸ê°€ë¡œ ì„ëª…í•©ë‹ˆë‹¤!`;

            await showResult("SDGs íƒí—˜ì„ ì™„ë£Œí•˜ì˜€ìŠµë‹ˆë‹¤!", endMessage);
            
            gameActive = false;
            rollDiceBtn.disabled = true;
            rollDiceBtn.classList.add('opacity-50', 'cursor-not-allowed');
            gameMessageEl.textContent = 'ê²Œì„ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.';
            diceResultEl.textContent = 'ğŸ†';
        } else {
            gameMessageEl.textContent = 'ì£¼ì‚¬ìœ„ë¥¼ êµ´ë ¤ì£¼ì„¸ìš”.';
            gameActive = true;
            rollDiceBtn.disabled = false;
            rollDiceBtn.classList.remove('opacity-50', 'cursor-not-allowed');
        }
    }

    rollDiceBtn.addEventListener('click', rollDiceAndMove);
    
    createSimplifiedBoard();

</script>
</body>
</html>